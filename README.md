
快乐的时光总是转瞬即逝，尤其是当我们面对bug时，不仅浪费了宝贵的时间，更让人感到沮丧。因为bug往往是非常奇怪、难以捉摸的，找来找去你始终无法确定问题所在，最终意识到这些bug并没有多大技术含量。尽管如此，它们却能占据你大量的精力和时间。


这样反复琢磨，往往并没有多大意义，甚至对于个人的技术成长帮助也微乎其微。与其如此，不如趁这个时间去翻阅文档、深入学习，这样或许能得到更有价值的提升。今天，我将结合一个旧项目的案例，介绍如何借助AI代码助手来快速定位和解决bug，帮助你更高效地提升工作效率，节省调试时间，避免掉入冗长的bug修复死循环中。


今天的主题主要会涉及一些关于SQL快速排错的技巧与方法。


# 快速拍错


## 没有足够的值


当前市场上存在许多流行的代码生成插件，然而这些插件在生成代码的位置上通常是固定的，并且大多偏向于MySQL数据库。这种情况使得对于老旧项目的开发者来说，使用这些插件显得格外困难，只能采取逐步编写的方式进行调整与优化。


今天我遇到了一个与此相关的bug。在我的项目中，我使用了Oracle的merge语句来处理插入和更新操作，以应对数据缺失和数据存在两种情况。下面是大致的SQL语句示例：



```
merge into table a
using () b
on (a.pk = b.pk)
when not matched then
 insert ( ) values()
when matched then
 update set a.value = b.value

```

看起来似乎没有太大的问题，按照既定的结构进行撰写就可以了。然而，考虑到表结构包含大约40到50个字段，这时你还能够逐个手动输入吗？显然，这样会耗费大量的时间和精力。因此，我决定直接将表结构提供给AI助手，让它帮我进行代码的自动生成，以便快速完成任务。


当然，我个人更倾向于使用补全功能，这样可以让我慢慢确保代码的准确性。例如，可以按照下面的方式进行操作：


![image](https://img2024.cnblogs.com/blog/1423484/202411/1423484-20241126175207042-436532843.png)


紧接着，联调测试的时候，发现还是少了一个值，报错如下。此时，根据以往的经验，需要进一步进行人工排查和分析，基本会耗费5\-10分支时间去排错。


![image](https://img2024.cnblogs.com/blog/1423484/202411/1423484-20241126175212994-1417959224.png)


我们可以直接利用AI助手，让它为我们高效地搜索和定位所需的信息。


![image](https://img2024.cnblogs.com/blog/1423484/202411/1423484-20241126175221554-103543895.png)


刚才我们提出的问题表达得比较模糊，因此希望能够进一步明确一下具体缺失的是哪个字段。


![image](https://img2024.cnblogs.com/blog/1423484/202411/1423484-20241126175226394-1994894556.png)


非常顺利，最后成功运行了，如图所示：


![image](https://img2024.cnblogs.com/blog/1423484/202411/1423484-20241126175232260-128938558.png)


## 赋值问题


尽管我在前端已经明确传递了某个字段的值，但为什么在实际操作中没有成功赋值？同时，我的SQL语句中也确实包含了该字段的插入操作。为了更好地解决这个问题，我会毫不犹豫地向AI助手寻求指导。如图所示：


![image](https://img2024.cnblogs.com/blog/1423484/202411/1423484-20241126175238564-1522532767.png)


发现是由于忘记编写getter方法导致的问题。老旧项目中没有使用Lombok，这是没办法的事情，我们必须手动实现这些方法。经过修复后，相关属性能够正常赋值。


## 对比字段


目前，由于两个系统所直接使用的数据库存在不一致的问题，这将导致后续的维护工作变得异常困难。因此，根据业务需求，我们需要对数据进行补齐。然而，我发现至少缺少五个数据项，并且这些数据的顺序也已经被打乱。自行进行排查无疑会浪费大量时间。


在这种情况下，使用AI代码助手将是一个极为有效的解决方案，如下图所示：


![image](https://img2024.cnblogs.com/blog/1423484/202411/1423484-20241126175350757-2131927189.png)


很快就能得出结果，直接将SQL生成完成，后续只需将SQL上线即可，无需再做额外调整。


![image](https://img2024.cnblogs.com/blog/1423484/202411/1423484-20241126175355527-283886001.png)


最后，在不断地向AI代码助手请教的过程中，我终于成功完成了CRUD这项基本任务。这样一来，我再也不需要浪费时间和精力去处理那些琐碎而无意义的错误了。


# 总结


在软件开发的过程中，我们常常会遇到各种棘手的bug，它们可能看似无害，但却能消耗大量时间和精力。虽然解决这些问题本身可能并没有太大技术挑战，但长时间的调试和排查无疑会使人感到沮丧。然而，借助现代技术工具，尤其是AI代码助手，我们能够大大提高效率，避免陷入无休止的错误修复死循环。


通过今天的分享，我们看到如何利用AI助手快速定位并解决SQL排错问题，节省调试时间，同时提升工作效率。与其在错误中反复徘徊，不如学会借助工具，让自己能够更加专注于技术的深度探索与创新。




---


我是努力的小雨，一名 Java 服务端码农，潜心研究着 AI 技术的奥秘。我热爱技术交流与分享，对开源社区充满热情。同时也是一位腾讯云创作之星、阿里云专家博主、华为云云享专家、掘金优秀作者。


💡 我将不吝分享我在技术道路上的个人探索与经验，希望能为你的学习与成长带来一些启发与帮助。


🌟 欢迎关注努力的小雨！🌟


 本博客参考[westworld加速器](https://xbsj9.com)。转载请注明出处！
